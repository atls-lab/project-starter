# Инструкции репозитория

## Формат ответа
- без вводных текстов
- без прелюдий, объяснений, мотивационных фраз
- начинать сразу с сути
- без эпитетов, без метафор, без воды
- если можно - держать ответ в 3-7 пунктах; если не лезет - писать столько, сколько надо
- код добавлять только если он нужен для решения или его явно попросили
- ревью кода проводить жёстко, критиковать использование антипаттернов и моветонов
- писать на русском

## Стиль
- короткие, плотные формулировки, без канцелярита
- не пересказывать запрос и контекст, если это не нужно для решения
- не добавлять советы и "можно ещё", если это не просили
- код и команды оформлять в Markdown
- команды всегда в блоках ```bash```, код в ```ts```/```tsx```/```js``` по месту, пути и идентификаторы в `...`
- при ревью нескольких файлов указывать путь файла в каждом фрагменте
- давать один рекомендуемый вариант решения; альтернативы - только по явному запросу
- в код-ревью обращаться к автору изменений (разработчику), а не к «заказчику»
- если нужны схемы - использовать C4 и PlantUML, только по запросу

## MCP
- рекомендуемые MCP-серверы перечислены в `.agents/mcp.md`
- использовать MCP только по явному запросу, без автозапуска
- если использован MCP - в ответе указать что использовал и что сделал

## Дополнительные инструкции
- фронтенд: `.agents/instructions/frontend.md`
- кастомные инструкции конкретного проекта (если есть): `.agents/instructions/project.md` или `.agents/instructions/project/**`

## Общие принципы
- сначала узнать контекст проекта, проверить соглашения и изучить структуру аналогичных фич
- перед правками искать по репозиторию (`rg`, `ls`, `cat`), не придумывать структуру и правила
- менять только то, что требуется задачей, без побочных рефакторингов
- минимизировать дифф, не переформатировать файлы без необходимости
- не задавать уточняющие вопросы, если можно продолжать без них; иначе - задать не больше 3
- не добавлять зависимости без согласования
- не менять лицензии, права доступа и owner-настройки без запроса
- если меняются контракты или поведение - обновлять документацию рядом с кодом
- архитектурные изменения перечислять кратко, без объяснений

## Публичный контракт
- public API = exports из public entrypoint, navigation routes, публичные модели, публичные props/params

## Ограничения для агента
- не менять публичные контракты без явной команды
- не добавлять зависимости без разрешения
- не править локали без прямого указания
- не делать архитектурные рефакторы вне задачи

## Стиль кода
- магические значения выносить в константы
- повторяющийся код выносить в отдельные функции или методы
- один класс или функция - один файл
- плоские нейминги: не дублировать название контекста в имени файла, если оно уже есть в пути
- не писать мусорные комментарии; допускаются краткие doc-комменты на публичных контрактах и tricky местах
- логировать только при отладке; debug-логи не коммитить, уровни логирования не менять без задачи

## Безопасность и приватность
- не раскрывать секреты и не логировать чувствительные данные
- не хранить секреты в репозитории, использовать переменные окружения и хранилища секретов
- запросы к базам данных строить безопасным способом, без конкатенации строк

## Тесты и качество
- при изменении логики предлагать или добавлять тесты
- запускать сборку, линт и тесты только по запросу или если это прямо требуется задачей
- если тесты или проверки не запускались, явно это указать
